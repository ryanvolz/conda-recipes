{% set name = "digital_rf" %}
{% set version = "2.2.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  git_url: https://github.com/ryanvolz/{{ name }}.git
  git_rev: {{ version }}

build:
  number: 0
  detect_binary_files_with_prefix: True

requirements:
  build:
    - toolchain
    - python >=2.7,<3
    - numpy
    - hdf5
    - pkg-config
    - pkgconfig
  run:
    - python >=2.7,<3
    - numpy
    - h5py

test:
  imports:
    - digital_rf_hdf5
    - digital_metadata
  source_files:
    - build/source/test_rf_write_hdf5
    - testing/*.py
  commands:
    - build/source/test_rf_write_hdf5
    - python testing/test_digital_rf_hdf5.py
    - rm -r /tmp/hdf5*
    - python testing/test_write_digital_metadata.py
    - python testing/test_read_digital_metadata.py
    - rm -r /tmp/test_metadata/
